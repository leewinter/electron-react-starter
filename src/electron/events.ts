import { ipcMain, IpcMainEvent } from 'electron';
import {type EventRequest, type EventResponse} from '../types/events';



const eventsArray = [
  {
    channel: "hello",
    evenRegister: function () {
      ipcMain.on(`${this.channel}-request`, (event: IpcMainEvent, args: EventRequest) => {
        console.log("Received from React:", args);

        // Would be generated by some work
        const generatedResponsePayload = { channel: this.channel, payload: { message: "Hello Electron " + new Date().getTime() } } as EventResponse;
      
        // Send a response back to the renderer process
        event.reply(`${this.channel}-response`, generatedResponsePayload);
      });
    }
  }
];

eventsArray.forEach(e=>e.evenRegister())